<div class="notification-container">
  <button class="notification-btn" (click)="toggleDropdown()">
    <span class="bell-wrapper">
      <mat-icon class="bell-icon">notifications</mat-icon>
      <span *ngIf="unreadCount > 0" class="badge">{{ unreadCount }}</span>
    </span>
    <span class="notif-label">Notifications</span>
  </button>

  <div class="dropdown animated" *ngIf="showDropdown">
    <div class="dropdown-header">
      <span class="dropdown-title">Your Notifications</span>
      <button *ngIf="unreadCount > 0" class="mark-all-btn" (click)="markAllAsRead()">Mark all as read</button>
    </div>
    <div class="notification-list">
      <!-- Loading State -->
      <div *ngIf="loading" class="loading">
        <mat-spinner diameter="30"></mat-spinner> Loading notifications...
      </div>

      <!-- Error State -->
      <div *ngIf="error" class="error">
        <mat-icon color="warn">error</mat-icon> {{ error }}
      </div>

      <!-- No Notifications -->
      <div *ngIf="!loading && !error && notifications.length === 0" class="no-notifications">
        <mat-icon>info</mat-icon> No notifications found.
      </div>

      <!-- Notification List -->
      <div *ngIf="!loading && !error && notifications.length > 0">
        <div *ngFor="let notification of notifications" class="notification-item" [class.unread]="!notification.isRead" [class.success]="notificationType(notification) === 'success'" [class.error]="notificationType(notification) === 'error'" [class.warning]="notificationType(notification) === 'warning'" [class.info]="notificationType(notification) === 'info'">
          <div class="notif-icon">
            <mat-icon *ngIf="notificationType(notification) === 'success'">check_circle</mat-icon>
            <mat-icon *ngIf="notificationType(notification) === 'error'">error</mat-icon>
            <mat-icon *ngIf="notificationType(notification) === 'warning'">warning</mat-icon>
            <mat-icon *ngIf="notificationType(notification) === 'info'">info</mat-icon>
          </div>
          <div class="notif-content">
            <p>{{ notification.message }}</p>
            <span class="notif-time">{{ notification.timestamp | date:'MMM d, y, h:mm a' }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>